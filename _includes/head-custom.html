<script type="module">
  import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs';
  mermaid.initialize({ startOnLoad: true, theme: 'neutral' });
  await mermaid.run({ querySelector: 'code.language-mermaid' });
</script>

<style>
  :root {
    --fab-fg: #ffffff;
    --fab-shadow: 0 10px 20px rgba(0,0,0,.25), 0 2px 6px rgba(0,0,0,.2);
    --fab-shadow-hover: 0 14px 28px rgba(0,0,0,.28), 0 6px 12px rgba(0,0,0,.22);
    --fab-border: rgba(255,255,255,.28);
  }
  @media (prefers-color-scheme: dark) {
    :root {
      --fab-shadow: 0 10px 22px rgba(0,0,0,.45), 0 2px 8px rgba(0,0,0,.35);
      --fab-shadow-hover: 0 16px 32px rgba(0,0,0,.5), 0 8px 14px rgba(0,0,0,.4);
      --fab-border: rgba(255,255,255,.22);
    }
  }

  .issue-fab {
    position: fixed;
    inset-inline-end: 16px;
    inset-block-end: calc(16px + env(safe-area-inset-bottom, 0));
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 10px 14px;
    border-radius: 999px;
    color: var(--fab-fg);
    text-decoration: none;
    box-shadow: var(--fab-shadow);
    background: var(--fab-bg, linear-gradient(135deg, #3b82f6, #22d3ee));
    border: 1px solid var(--fab-border);
    backdrop-filter: blur(8px) saturate(1.1);
    -webkit-backdrop-filter: blur(8px) saturate(1.1);
    z-index: 9999;
    transition: transform .12s ease, box-shadow .12s ease, filter .2s ease, background .25s ease;
    will-change: transform, box-shadow;
  }
  .issue-fab:hover {
    transform: translateY(-1px) scale(1.02);
    box-shadow: var(--fab-shadow-hover);
    filter: brightness(1.03);
  }
  .issue-fab:active {
    transform: translateY(0) scale(.98);
    filter: brightness(.98);
  }
  .issue-fab:focus-visible {
    outline: 3px solid rgba(255,255,255,.6);
    outline-offset: 2px;
  }

  /* Variants */
  .issue-fab--bug { --fab-bg: linear-gradient(135deg, #ef4444, #f97316); }
  .issue-fab--docs { --fab-bg: linear-gradient(135deg, #3b82f6, #22d3ee); }

  /* Vertical stacking */
  .issue-fab--docs { inset-block-end: calc(70px + env(safe-area-inset-bottom, 0)); }

  /* Icon + label */
  .issue-fab__icon {
    font-size: 1.1em;
    line-height: 1;
    filter: drop-shadow(0 1px 0 rgba(0,0,0,.15));
  }
  .issue-fab__label {
    font: 14px/1.2 system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    white-space: nowrap;
  }

  /* Compact on small screens: icon-only */
  @media (max-width: 480px) {
    .issue-fab { padding: 12px; gap: 0; }
    .issue-fab__label { display: none; }
  }

  /* Respect reduced motion */
  @media (prefers-reduced-motion: reduce) {
    .issue-fab { transition: none; }
    .issue-fab:hover, .issue-fab:active { transform: none; }
  }
</style>

<script>
(function () {
  const base = "https://github.com/huangyingting/mcp-workshop/issues/new";

  // Code bug button
  const bugParams = new URLSearchParams({
    template: "bug_report.md",
    labels: "bug",
    title: "[Bug]: "
  });
  const bugBtn = document.createElement("a");
  bugBtn.href = base + "?" + bugParams.toString();
  bugBtn.target = "_blank";
  bugBtn.rel = "noopener";
  bugBtn.className = "issue-fab issue-fab--bug";
  bugBtn.ariaLabel = "Report a code bug";
  bugBtn.innerHTML = '<span class="issue-fab__icon" aria-hidden="true">üêû</span><span class="issue-fab__label">Report bug</span>';

  // Docs issue button (include source page)
  const docsParams = new URLSearchParams({
    template: "docs_issue.md",
    labels: "documentation",
    title: "[Docs]: ",
    body: "Source page: " + location.href + "\\n\\n"
  });
  const docsBtn = document.createElement("a");
  docsBtn.href = base + "?" + docsParams.toString();
  docsBtn.target = "_blank";
  docsBtn.rel = "noopener";
  docsBtn.className = "issue-fab issue-fab--docs";
  docsBtn.ariaLabel = "Report a documentation issue";
  docsBtn.innerHTML = '<span class="issue-fab__icon" aria-hidden="true">üìò</span><span class="issue-fab__label">Docs issue</span>';

  function add() {
    document.body.appendChild(bugBtn);
    document.body.appendChild(docsBtn);
  }
  if (document.readyState === "loading") {
    document.addEventListener("DOMContentLoaded", add);
  } else {
    add();
  }
})();
</script>